!function(t,e){var n=function(n){return t(n,e)};"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof exports?module.exports=n:n(jQuery)}(function(t,e,n){t.fn.jScrollPane=function(o){function i(o,i){function s(e){var i,a,l,u,d,f,g=!1,v=!1;if(O=e,q===n)d=o.scrollTop(),f=o.scrollLeft(),o.css({overflow:"hidden",padding:0}),G=o.innerWidth()+ke,N=o.innerHeight(),o.width(G),q=t('<div class="jspPane" />').css("padding",we).append(o.children()),E=t('<div class="jspContainer" />').css({width:G+"px",height:N+"px"}).append(q).appendTo(o);else{if(o.css("width",""),g=O.stickToBottom&&H(),v=O.stickToRight&&S(),u=o.innerWidth()+ke!=G||o.outerHeight()!=N,u&&(G=o.innerWidth()+ke,N=o.innerHeight(),E.css({width:G+"px",height:N+"px"})),!u&&ye==K&&q.outerHeight()==Q)return void o.width(G);ye=K,q.css("width",""),o.width(G),E.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}q.css("overflow","auto"),K=e.contentWidth?e.contentWidth:q[0].scrollWidth,Q=q[0].scrollHeight,q.css("overflow",""),U=K/G,J=Q/N,Z=J>1,_=U>1,_||Z?(o.addClass("jspScrollable"),i=O.maintainPosition&&(ne||se),i&&(a=D(),l=x()),r(),c(),p(),i&&(T(v?K-G:a,!1),C(g?Q-N:l,!1)),Y(),P(),F(),O.enableKeyboardNavigation&&M(),O.clickOnTrack&&h(),R(),O.hijackInternalLinks&&I()):(o.removeClass("jspScrollable"),q.css({top:0,left:0,width:E.width()-ke}),A(),z(),X(),j()),O.autoReinitialise&&!be?be=setInterval(function(){s(O)},O.autoReinitialiseDelay):!O.autoReinitialise&&be&&clearInterval(be),d&&o.scrollTop(0)&&C(d,!1),f&&o.scrollLeft(0)&&T(f,!1),o.trigger("jsp-initialised",[_||Z])}function r(){Z&&(E.append(t('<div class="jspVerticalBar" />').append(t('<div class="jspCap jspCapTop" />'),t('<div class="jspTrack" />').append(t('<div class="jspDrag" />').append(t('<div class="jspDragTop" />'),t('<div class="jspDragBottom" />'))),t('<div class="jspCap jspCapBottom" />'))),re=E.find(">.jspVerticalBar"),ae=re.find(">.jspTrack"),te=ae.find(">.jspDrag"),O.showArrows&&(ue=t('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",d(0,-1)).bind("click.jsp",W),de=t('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",d(0,1)).bind("click.jsp",W),O.arrowScrollOnHover&&(ue.bind("mouseover.jsp",d(0,-1,ue)),de.bind("mouseover.jsp",d(0,1,de))),u(ae,O.verticalArrowPositions,ue,de)),le=N,E.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){le-=t(this).outerHeight()}),te.hover(function(){te.addClass("jspHover")},function(){te.removeClass("jspHover")}).bind("mousedown.jsp",function(e){t("html").bind("dragstart.jsp selectstart.jsp",W),te.addClass("jspActive");var n=e.pageY-te.position().top;return t("html").bind("mousemove.jsp",function(t){v(t.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",g),!1}),a())}function a(){ae.height(le+"px"),ne=0,ce=O.verticalGutter+ae.outerWidth(),q.width(G-ce-ke);try{0===re.position().left&&q.css("margin-left",ce+"px")}catch(t){}}function c(){_&&(E.append(t('<div class="jspHorizontalBar" />').append(t('<div class="jspCap jspCapLeft" />'),t('<div class="jspTrack" />').append(t('<div class="jspDrag" />').append(t('<div class="jspDragLeft" />'),t('<div class="jspDragRight" />'))),t('<div class="jspCap jspCapRight" />'))),fe=E.find(">.jspHorizontalBar"),he=fe.find(">.jspTrack"),oe=he.find(">.jspDrag"),O.showArrows&&(ve=t('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",d(-1,0)).bind("click.jsp",W),me=t('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",d(1,0)).bind("click.jsp",W),O.arrowScrollOnHover&&(ve.bind("mouseover.jsp",d(-1,0,ve)),me.bind("mouseover.jsp",d(1,0,me))),u(he,O.horizontalArrowPositions,ve,me)),oe.hover(function(){oe.addClass("jspHover")},function(){oe.removeClass("jspHover")}).bind("mousedown.jsp",function(e){t("html").bind("dragstart.jsp selectstart.jsp",W),oe.addClass("jspActive");var n=e.pageX-oe.position().left;return t("html").bind("mousemove.jsp",function(t){b(t.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",g),!1}),je=E.innerWidth(),l())}function l(){E.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){je-=t(this).outerWidth()}),he.width(je+"px"),se=0}function p(){if(_&&Z){var e=he.outerHeight(),n=ae.outerWidth();le-=e,t(fe).find(">.jspCap:visible,>.jspArrow").each(function(){je+=t(this).outerWidth()}),je-=n,N-=n,G-=e,he.parent().append(t('<div class="jspCorner" />').css("width",e+"px")),a(),l()}_&&q.width(E.outerWidth()-ke+"px"),Q=q.outerHeight(),J=Q/N,_&&(ge=Math.ceil(1/U*je),ge>O.horizontalDragMaxWidth?ge=O.horizontalDragMaxWidth:ge<O.horizontalDragMinWidth&&(ge=O.horizontalDragMinWidth),oe.width(ge+"px"),ie=je-ge,w(se)),Z&&(pe=Math.ceil(1/J*le),pe>O.verticalDragMaxHeight?pe=O.verticalDragMaxHeight:pe<O.verticalDragMinHeight&&(pe=O.verticalDragMinHeight),te.height(pe+"px"),ee=le-pe,m(ne))}function u(t,e,n,o){var i="before",s="after",r;"os"==e&&(e=/Mac/.test(navigator.platform)?"after":"split"),e==i?s=e:e==s&&(i=e,r=n,n=o,o=r),t[i](n)[s](o)}function d(t,e,n){return function(){return f(t,e,this,n),this.blur(),!1}}function f(e,n,o,i){o=t(o).addClass("jspActive");var s,r,a=!0,c=function(){0!==e&&V.scrollByX(e*O.arrowButtonSpeed),0!==n&&V.scrollByY(n*O.arrowButtonSpeed),r=setTimeout(c,a?O.initialDelay:O.arrowRepeatFreq),a=!1};c(),s=i?"mouseout.jsp":"mouseup.jsp",i=i||t("html"),i.bind(s,function(){o.removeClass("jspActive"),r&&clearTimeout(r),r=null,i.unbind(s)})}function h(){j(),Z&&ae.bind("mousedown.jsp",function(e){if(e.originalTarget===n||e.originalTarget==e.currentTarget){var o=t(this),i=o.offset(),s=e.pageY-i.top-ne,r,a=!0,c=function(){var t=o.offset(),n=e.pageY-t.top-pe/2,i=N*O.scrollPagePercent,p=ee*i/(Q-N);if(0>s)ne-p>n?V.scrollByY(-i):v(n);else{if(!(s>0))return void l();n>ne+p?V.scrollByY(i):v(n)}r=setTimeout(c,a?O.initialDelay:O.trackClickRepeatFreq),a=!1},l=function(){r&&clearTimeout(r),r=null,t(document).unbind("mouseup.jsp",l)};return c(),t(document).bind("mouseup.jsp",l),!1}}),_&&he.bind("mousedown.jsp",function(e){if(e.originalTarget===n||e.originalTarget==e.currentTarget){var o=t(this),i=o.offset(),s=e.pageX-i.left-se,r,a=!0,c=function(){var t=o.offset(),n=e.pageX-t.left-ge/2,i=G*O.scrollPagePercent,p=ie*i/(K-G);if(0>s)se-p>n?V.scrollByX(-i):b(n);else{if(!(s>0))return void l();n>se+p?V.scrollByX(i):b(n)}r=setTimeout(c,a?O.initialDelay:O.trackClickRepeatFreq),a=!1},l=function(){r&&clearTimeout(r),r=null,t(document).unbind("mouseup.jsp",l)};return c(),t(document).bind("mouseup.jsp",l),!1}})}function j(){he&&he.unbind("mousedown.jsp"),ae&&ae.unbind("mousedown.jsp")}function g(){t("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),te&&te.removeClass("jspActive"),oe&&oe.removeClass("jspActive")}function v(t,e){Z&&(0>t?t=0:t>ee&&(t=ee),e===n&&(e=O.animateScroll),e?V.animate(te,"top",t,m):(te.css("top",t),m(t)))}function m(t){t===n&&(t=te.position().top),E.scrollTop(0),ne=t||0;var e=0===ne,i=ne==ee,s=t/ee,r=-s*(Q-N);(Ce!=e||Be!=i)&&(Ce=e,Be=i,o.trigger("jsp-arrow-change",[Ce,Be,Te,De])),k(e,i),q.css("top",r),o.trigger("jsp-scroll-y",[-r,e,i]).trigger("scroll")}function b(t,e){_&&(0>t?t=0:t>ie&&(t=ie),e===n&&(e=O.animateScroll),e?V.animate(oe,"left",t,w):(oe.css("left",t),w(t)))}function w(t){t===n&&(t=oe.position().left),E.scrollTop(0),se=t||0;var e=0===se,i=se==ie,s=t/ie,r=-s*(K-G);(Te!=e||De!=i)&&(Te=e,De=i,o.trigger("jsp-arrow-change",[Ce,Be,Te,De])),y(e,i),q.css("left",r),o.trigger("jsp-scroll-x",[-r,e,i]).trigger("scroll")}function k(t,e){O.showArrows&&(ue[t?"addClass":"removeClass"]("jspDisabled"),de[e?"addClass":"removeClass"]("jspDisabled"))}function y(t,e){O.showArrows&&(ve[t?"addClass":"removeClass"]("jspDisabled"),me[e?"addClass":"removeClass"]("jspDisabled"))}function C(t,e){var n=t/(Q-N);v(n*ee,e)}function T(t,e){var n=t/(K-G);b(n*ie,e)}function B(e,n,o){var i,s,r,a=0,c=0,l,p,u,d,f,h;try{i=t(e)}catch(j){return}for(s=i.outerHeight(),r=i.outerWidth(),E.scrollTop(0),E.scrollLeft(0);!i.is(".jspPane");)if(a+=i.position().top,c+=i.position().left,i=i.offsetParent(),/^body|html$/i.test(i[0].nodeName))return;l=x(),u=l+N,l>a||n?f=a-O.horizontalGutter:a+s>u&&(f=a-N+s+O.horizontalGutter),isNaN(f)||C(f,o),p=D(),d=p+G,p>c||n?h=c-O.horizontalGutter:c+r>d&&(h=c-G+r+O.horizontalGutter),isNaN(h)||T(h,o)}function D(){return-q.position().left}function x(){return-q.position().top}function H(){var t=Q-N;return t>20&&t-x()<10}function S(){var t=K-G;return t>20&&t-D()<10}function P(){E.unbind(He).bind(He,function(t,e,n,o){se||(se=0),ne||(ne=0);var i=se,s=ne,r=t.deltaFactor||O.mouseWheelSpeed;return V.scrollBy(n*r,-o*r,!1),i==se&&s==ne})}function A(){E.unbind(He)}function W(){return!1}function Y(){q.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(t){B(t.target,!1)})}function z(){q.find(":input,a").unbind("focus.jsp")}function M(){function e(){var t=se,e=ne;switch(n){case 40:V.scrollByY(O.keyboardSpeed,!1);break;case 38:V.scrollByY(-O.keyboardSpeed,!1);break;case 34:case 32:V.scrollByY(N*O.scrollPagePercent,!1);break;case 33:V.scrollByY(-N*O.scrollPagePercent,!1);break;case 39:V.scrollByX(O.keyboardSpeed,!1);break;case 37:V.scrollByX(-O.keyboardSpeed,!1)}return i=t!=se||e!=ne}var n,i,s=[];_&&s.push(fe[0]),Z&&s.push(re[0]),q.focus(function(){o.focus()}),o.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(o){if(o.target===this||s.length&&t(o.target).closest(s).length){var r=se,a=ne;switch(o.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:n=o.keyCode,e();break;case 35:C(Q-N),n=null;break;case 36:C(0),n=null}return i=o.keyCode==n&&r!=se||a!=ne,!i}}).bind("keypress.jsp",function(t){return t.keyCode==n&&e(),!i}),O.hideFocus?(o.css("outline","none"),"hideFocus"in E[0]&&o.attr("hideFocus",!0)):(o.css("outline",""),"hideFocus"in E[0]&&o.attr("hideFocus",!1))}function X(){o.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function R(){if(location.hash&&location.hash.length>1){var e,n,o=escape(location.hash.substr(1));try{e=t("#"+o+', a[name="'+o+'"]')}catch(i){return}e.length&&q.find(o)&&(0===E.scrollTop()?n=setInterval(function(){E.scrollTop()>0&&(B(e,!0),t(document).scrollTop(E.position().top),clearInterval(n))},50):(B(e,!0),t(document).scrollTop(E.position().top)))}}function I(){t(document.body).data("jspHijack")||(t(document.body).data("jspHijack",!0),t(document.body).delegate("a[href*=#]","click",function(n){var o=this.href.substr(0,this.href.indexOf("#")),i=location.href,s,r,a,c,l,p;if(-1!==location.href.indexOf("#")&&(i=location.href.substr(0,location.href.indexOf("#"))),o===i){s=escape(this.href.substr(this.href.indexOf("#")+1));try{r=t("#"+s+', a[name="'+s+'"]')}catch(u){return}r.length&&(a=r.closest(".jspScrollable"),c=a.data("jsp"),c.scrollToElement(r,!0),a[0].scrollIntoView&&(l=t(e).scrollTop(),p=r.offset().top,(l>p||p>l+t(e).height())&&a[0].scrollIntoView()),n.preventDefault())}}))}function F(){var t,e,n,o,i,s=!1;E.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(r){var a=r.originalEvent.touches[0];t=D(),e=x(),n=a.pageX,o=a.pageY,i=!1,s=!0}).bind("touchmove.jsp",function(r){if(s){var a=r.originalEvent.touches[0],c=se,l=ne;return V.scrollTo(t+n-a.pageX,e+o-a.pageY),i=i||Math.abs(n-a.pageX)>5||Math.abs(o-a.pageY)>5,c==se&&l==ne}}).bind("touchend.jsp",function(t){s=!1}).bind("click.jsp-touchclick",function(t){return i?(i=!1,!1):void 0})}function L(){var t=x(),e=D();o.removeClass("jspScrollable").unbind(".jsp"),o.replaceWith(xe.append(q.children())),xe.scrollTop(t),xe.scrollLeft(e),be&&clearInterval(be)}var O,V=this,q,G,N,E,K,Q,U,J,Z,_,te,ee,ne,oe,ie,se,re,ae,ce,le,pe,ue,de,fe,he,je,ge,ve,me,be,we,ke,ye,Ce=!0,Te=!0,Be=!1,De=!1,xe=o.clone(!1,!1).empty(),He=t.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===o.css("box-sizing")?(we=0,ke=0):(we=o.css("paddingTop")+" "+o.css("paddingRight")+" "+o.css("paddingBottom")+" "+o.css("paddingLeft"),ke=(parseInt(o.css("paddingLeft"),10)||0)+(parseInt(o.css("paddingRight"),10)||0)),t.extend(V,{reinitialise:function(e){e=t.extend({},O,e),s(e)},scrollToElement:function(t,e,n){B(t,e,n)},scrollTo:function(t,e,n){T(t,n),C(e,n)},scrollToX:function(t,e){T(t,e)},scrollToY:function(t,e){C(t,e)},scrollToPercentX:function(t,e){T(t*(K-G),e)},scrollToPercentY:function(t,e){C(t*(Q-N),e)},scrollBy:function(t,e,n){V.scrollByX(t,n),V.scrollByY(e,n)},scrollByX:function(t,e){var n=D()+Math[0>t?"floor":"ceil"](t),o=n/(K-G);b(o*ie,e)},scrollByY:function(t,e){var n=x()+Math[0>t?"floor":"ceil"](t),o=n/(Q-N);v(o*ee,e)},positionDragX:function(t,e){b(t,e)},positionDragY:function(t,e){v(t,e)},animate:function(t,e,n,o){var i={};i[e]=n,t.animate(i,{duration:O.animateDuration,easing:O.animateEase,queue:!1,step:o})},getContentPositionX:function(){return D()},getContentPositionY:function(){return x()},getContentWidth:function(){return K},getContentHeight:function(){return Q},getPercentScrolledX:function(){return D()/(K-G)},getPercentScrolledY:function(){return x()/(Q-N)},getIsScrollableH:function(){return _},getIsScrollableV:function(){return Z},getContentPane:function(){return q},scrollToBottom:function(t){v(ee,t)},hijackInternalLinks:t.noop,destroy:function(){L()}}),s(i)}return o=t.extend({},t.fn.jScrollPane.defaults,o),t.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){o[this]=o[this]||o.speed}),this.each(function(){var e=t(this),n=e.data("jsp");n?n.reinitialise(o):(t("script",e).filter('[type="text/javascript"],:not([type])').remove(),n=new i(e,o),e.data("jsp",n))})},t.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}},this);